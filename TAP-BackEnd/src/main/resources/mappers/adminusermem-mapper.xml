<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="AdminUserMem">
	<resultMap id="memberResultMap" type="java.util.HashMap">
    	<result property="JOIN_DATE" column="join_date" javaType="java.sql.Timestamp" />    	
	</resultMap>
	<select id="getAllUserMem" resultMap="memberResultMap">
		select m.name as name,g.name as grade ,m.join_date,m.enabled  from members m left join grade g on m.grade_seq = g.seq
	</select> 
<select id="searchUserMem" resultMap="memberResultMap">
SELECT m.name AS name, g.name AS grade, m.join_date, m.enabled
FROM members m
LEFT JOIN grade g ON m.grade_seq = g.seq
WHERE (#{keyword} IS NULL OR m.name LIKE '%' || #{keyword} || '%')
AND (#{gradeSeq} IS NULL OR m.grade_seq = #{gradeSeq})
</select>
<select id="getGrade" resultType="com.tap.grade.dto.GradeDTO">
    select * from grade
</select>
</mapper>